<app-header></app-header>
<div class="page-layout">
    <ng-container *ngIf="bookings$ | async as bookings">
        <ng-container *ngIf="bookings.length; else noBookings">
            <div class="calendar">
                <div class="calendar-card-container">
                    <mat-card class="calendar-card">
                        <mat-calendar #calendar [minDate]="selectedDate" [maxDate]="selectedDate"
                            [(selected)]="selectedDate">
                        </mat-calendar>
                    </mat-card>
                </div>

            </div>
            <div class="tables-container">
                <div class="tables-image">
                    <div class="booking-info-text">
                        <p style="font: 24px 'Segoe UI';">Floor view with booked desk</p>
                        <!-- <p>{{floor}}, {{building}}, {{city}}</p> -->
                    </div>
                    <img src="assets/images/floor_plan.png" alt="Floor layout">
                    <!-- <svg id="tables-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 740 1060">
                        <path *ngFor="let desk of allDesks$ | async" id="{{desk.desk_number}}"
                            [attr.d]=desk.desk_coordinates />
                    </svg> -->
                </div>
            </div>
        </ng-container>
    </ng-container>
    <ng-container *ngIf="bookings$ | async as bookings">
        <ng-container *ngIf="bookings.length">
            <div class="desk-confirmation-column">
                <div class="desk-confirmation-container">
                    <p>List of your existing bookings:</p>
                    <button class="button-select" *ngFor="let booking of bookings" [value]="booking.booking_id"
                        (click)="onSelectedBookingClick(booking.booking_date, booking.booking_id, booking.desk_number)">
                        <span class="button-text">
                            <span> Desk {{booking.desk_number}}, {{booking.booking_date | date:'MMMM d'}},</span>
                            <span>{{booking.building_name}}, {{booking.floor_name}}</span>
                        </span>
                        <mat-icon>keyboard_arrow_right </mat-icon>

                    </button>

                    <div class="button-container">
                        <button mat-flat-button class="button-select-start" type="submit"
                            (click)="onClickStartBooking()">
                            Start new booking
                        </button>
                        <button mat-flat-button class="button-select-cancel" type="submit" *ngIf="!isDisabled"
                            (click)="onCancelBookingClick()">Cancel
                            booking
                        </button>

                    </div>
                </div>
            </div>
        </ng-container>
    </ng-container>
</div>

<ng-template #noBookings>
    <p>You have no bookings</p>
    <div class="buttonAligment">
        <button mat-raised-button (click)="onClickStartBooking()">Start new booking</button>
    </div>
</ng-template>